{% extends 'base.html' %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="Best Bootstrap Admin Dashboards">
    <meta name="author" content="Bootstrap Gallery" />
    <link rel="canonical" href="https://www.bootstrap.gallery/">
    <meta property="og:url" content="https://www.bootstrap.gallery">
    <meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
    <meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta property="og:type" content="Website">
    <meta property="og:site_name" content="Bootstrap Gallery">
    <link rel="shortcut icon" href="assets/images/favicon.svg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/animate.css">

    <!-- Bootstrap font icons css -->
    <link rel="stylesheet" href="assets/fonts/bootstrap/bootstrap-icons.css">

    <!-- Main css -->
    <link rel="stylesheet" href="assets/css/main.min.css">


    <!-- *************
        ************ Vendor Css Files *************
    ************ -->

    <!-- Scrollbar CSS -->
    <link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css">
</head>
<body>
    <div class="content-wrapper-scroll">

        <!-- Content wrapper start -->
        <div class="content-wrapper">            
            <!-- Row start -->
            <div class="row">
                <div class="col-12">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Criteria 4
                                    <small class="text-muted d-block text-justify">Description: The adequacy and optimal use of the facilities available in an institution are essential to maintain the quality of academic and other programmes on the campus. It also requires information on how every constituent of the institution - students, teachers and staff - benefit from these facilities. Expansion of facilities to meet future development is included among other concerns.</small> 
                                  </div>
                            </div>
                            <div class="card-body">
                                <div class="accordion" id="accordionPanelsStayOpenExample">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                                                aria-controls="panelsStayOpen-collapseOne">
                                                Criteria 4.1
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                                        aria-labelledby="panelsStayOpen-headingOne">
                                        <div class="accordion-body text-justify">
                                            Adequate infrastructure facilities are keys for effective and efficient conduct of the educational programmes. The growth of infrastructure thus has to keep pace with the academic developments in the institution. The other supportive facilities on the campus are developed to contribute to the effective ambience for curricular, extra- curricular and administrative activities. A provision of expenditure in the budget is made annually for maintenance and replenishment of physical facilities which will ensure their availability on a continual basis.
                                        </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                                                aria-controls="panelsStayOpen-collapseTwo">
                                                Criteria 4.2
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse"
                                            aria-labelledby="panelsStayOpen-headingTwo">
                                            <div class="accordion-body text-justify">
                                                The library holdings in terms of books, journals and other learning materials and technology-aided learning mechanisms which enable students to acquire information, knowledge and skills required for their study programmes. A recent development in the field due to availability of digital means, the functioning of the library has undergone a drastic change. Automation of library using the ILMS, use of e-journals and books, providing remote access to e-resources in the library have become a matter of necessity. Providing for these and such other developments as well as utilizing them well are important indicators of the quality of an academic institution.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                                                aria-controls="panelsStayOpen-collapseThree">
                                                Criteria 4.3
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
                                            aria-labelledby="panelsStayOpen-headingThree">
                                            <div class="accordion-body text-justify">
                                                The institution adopts policies and strategies for adequate technology deployment and maintenance. The ICT facilities and other learning resources are adequately available in the institution for academic and administrative purposes. The staff and students have access totechnology and information retrieval on current and relevant issues. The institution deploys and employs ICTs for a range of activities.

                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false"
                                                aria-controls="panelsStayOpen-collapseFour">
                                                Criteria 4.4
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse"
                                            aria-labelledby="panelsStayOpen-headingFour">
                                            <div class="accordion-body">
                                                Having adequate infrastructure is not enough for effective institutional functioning, but regular maintenance and periodic replenishment of infrastructure is essential. It is necessary that the institution has sufficient resources allocated for regular upkeep of the infrastructure and there are effective mechanisms for the upkeep of the infrastructure facilities; and promote the optimum use of the same.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Row end -->

        </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
    // Event listener for the Add Criteria button
    document.querySelectorAll('[data-bs-toggle="modal"]').forEach(function (button) {
        button.addEventListener('click', function () {
            var username = button.getAttribute('data-username');
            var assignedCriteria = button.getAttribute('data-assigned').split(',');
            var unassignedCriteria = button.getAttribute('data-unassigned').split(',');

            // Clear the previous criteria in the modal
            var unassignedList = document.getElementById('unassignedCriteriaList');
            unassignedList.innerHTML = '';

            // Populate the modal with unassigned criteria
            unassignedCriteria.forEach(function (criteria) {
                if (criteria.trim() !== '') {  // Ensure empty strings are ignored
                    var checkbox = `
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="${criteria}" id="criteria_${criteria}">
                            <label class="form-check-label" for="criteria_${criteria}">${criteria}</label>
                        </div>`;
                    unassignedList.innerHTML += checkbox;
                }
            });

            // Store the username for submission
            document.getElementById('criteriaForm').setAttribute('data-username', username);
        });
    });

    // Event listener for Add Selected Criteria button
    document.getElementById('addSelectedCriteria').addEventListener('click', function () {
        var form = document.getElementById('criteriaForm');
        var username = form.getAttribute('data-username');
        var selectedCriteria = [];

        // Collect selected criteria
        form.querySelectorAll('input[type="checkbox"]:checked').forEach(function (checkbox) {
            selectedCriteria.push(checkbox.value);
        });

        // Check if any criteria are selected
        if (selectedCriteria.length === 0) {
            alert("Please select at least one criteria to add.");
            return;  // Stop further execution if no criteria are selected
        }

        // Create the URL for the AJAX request
        var criteriaList = selectedCriteria.join(','); // Join selected criteria with commas
        // var requestUrl = /assign-criteria/${username}/${criteriaList}/; // Adjust this if your URL pattern is different

        // Send AJAX request to the specified URL
        fetch(requestUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'  // Ensure CSRF protection is handled
            },
            body: JSON.stringify({
                criteria: selectedCriteria
            })
        })
        .then(response => {
            if (response.ok) {
                return response.json();
            }
            throw new Error('Network response was not ok.');
        })
        .then(data => {
            // Handle success (e.g., update the UI)
            console.log(data); // Check the response
            // Optionally, you can close the modal here
            $('#criteriaModal').modal('hide');
            // Optionally, refresh the criteria list for the user or update the UI
            location.reload(); // Reload the page to reflect changes
        })
        .catch(error => {
            console.error('There has been a problem with your fetch operation:', error);
        });
    });
});
        </script>
    <script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/bootstrap.bundle.min.js"></script>
		<script src="assets/js/modernizr.js"></script>
		<script src="assets/js/moment.js"></script>

		<!-- *************
			************ Vendor Js Files *************
		************* -->

		<!-- Overlay Scroll JS -->
		<script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
		<script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

		<!-- Main Js Required -->
		<script src="assets/js/main.js"></script>
</body>
</html>
{% endblock %}